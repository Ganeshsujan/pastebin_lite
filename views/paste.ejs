<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Paste</title>
    <style>
        :root{
            --bg-1: #667eea;
            --bg-2: #764ba2;
            --card-bg: #ffffff;
            --muted: #6b7280;
            --accent: linear-gradient(135deg,var(--bg-1),var(--bg-2));
            --glass: rgba(255,255,255,0.6);
        }

        *{box-sizing:border-box}

        html,body{height:100%}

        body{
            margin:0;
            font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
            background: radial-gradient(1200px 600px at 0% 10%, rgba(102,126,234,0.12), transparent),
                        radial-gradient(900px 500px at 100% 90%, rgba(118,75,162,0.12), transparent),
                        linear-gradient(135deg,var(--bg-1),var(--bg-2));
            -webkit-font-smoothing:antialiased;
            -moz-osx-font-smoothing:grayscale;
            padding:32px 20px;
            color:#111827;
        }

        .container{
            max-width:920px;
            margin:0 auto;
            display:flex;
            flex-direction:column;
            gap:18px;
        }

        .card{
            background:var(--card-bg);
            border-radius:12px;
            overflow:hidden;
            box-shadow:0 10px 30px rgba(2,6,23,0.2);
        }

        .header{
            padding:20px 24px;
            display:flex;
            align-items:center;
            justify-content:space-between;
            gap:12px;
            border-bottom:1px solid #eef2ff;
        }
        .header .header-title{
            font-size: 33px;
            text-transform: uppercase;
            color: white;
        }

        .title-meta{display:flex;flex-direction:column;gap:6px}

        h1{font-size:20px;margin:0;color:#0f172a}

        .meta{display:flex;gap:12px;align-items:center;flex-wrap:wrap}

        .badge{
            font-size:13px;color:var(--muted);
            background:#f8fafc;padding:6px 10px;border-radius:999px;border:1px solid #eef2ff
        }

        .content-wrapper{padding:20px}

        pre.content{
            margin:0;
            background:#0b1220;
            color:#e6eef6;
            padding:18px;
            border-radius:8px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", 'Courier New', monospace;
            font-size:13px;line-height:1.5;
            white-space:pre-wrap;word-break:break-word;overflow:auto;max-height:62vh;border:1px solid rgba(255,255,255,0.03)
        }

        .warning{
            background:#fff7ed;border:1px solid #ffecd1;color:#7c3aed;padding:12px;border-radius:8px;margin-bottom:14px;font-size:13px
        }

        .footer{display:flex;gap:10px;align-items:center;justify-content:flex-end;margin-top:14px}

        .btn{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:8px;border:none;cursor:pointer;font-weight:600;text-decoration:none;transition:all 0.3s ease}

        .btn.primary{background:var(--accent);color:white;box-shadow:0 6px 18px rgba(102,126,234,0.18)}
        .btn.primary:hover{box-shadow:0 10px 28px rgba(102,126,234,0.35);transform:translateY(-2px)}
        .btn.ghost{background:transparent;color:var(--card-bg);border:1px solid rgba(255,255,255,0.06)}
        .btn.ghost:hover{border-color:rgba(255,255,255,0.2);background:rgba(255,255,255,0.05)}

        .btn:active{transform:translateY(1px)}

        @media (max-width:600px){
            .header{flex-direction:column;align-items:flex-start}
            .footer{justify-content:space-between}
            h1{font-size:18px}
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="header-title">Pastebin Lite</h1>
            
        </div>
        
        <div class="content-wrapper card">
            <div class="header">
                <div class="title-meta">
                    <h1>Paste: <%= id %></h1>
                    <div class="meta">
                        <div class="badge">ID: <strong style="margin-left:6px;color:#0f172a"> <%= id %> </strong></div>
                        <% if (remaining_views !== null) { %>
                            <div class="badge">Remaining: <strong style="margin-left:6px;color:#0f172a"><%= remaining_views %></strong></div>
                        <% } %>
                        <% if (expires_at) { %>
                            <div class="badge" id="countdown">Expires in: <strong style="margin-left:6px;color:#0f172a" id="countdownTime">--</strong></div>
                        <% } %>
                    </div>
                </div>
            </div>

            <div style="padding:20px">
                <% if (remaining_views !== null && remaining_views <= 2) { %>
                    <div class="warning">
                        ⚠️ This paste will be deleted after <%= remaining_views %> more <%= remaining_views === 1 ? 'view' : 'views' %>.
                    </div>
                <% } %>

                <pre class="content"><code id="pasteContent"><%= content %></code></pre>

                <div style="display:flex;gap:8px;align-items:center;margin-top:20px;justify-content:flex-end">
                    <a href="/" class="btn primary">Create New Paste</a>
                    <button id="copyLinkBtn" class="btn" title="Copy paste link">Copy Link</button>
                </div>
            </div>
        </div>

        <script>
            (function(){
                const btn = document.getElementById('copyLinkBtn');
                if(!btn) return;
                const pasteId = '<%= id %>';
                const fullUrl = window.location.protocol + '//' + window.location.host + '/p/' + pasteId;
                btn.addEventListener('click', async function(){
                    try{
                        await navigator.clipboard.writeText(fullUrl);
                        const prev = btn.textContent;
                        btn.textContent = 'Link Copied!';
                        btn.classList.add('primary');
                        setTimeout(()=>{ btn.textContent = prev; btn.classList.remove('primary') },1500);
                    }catch(e){
                        const ta = document.createElement('textarea');
                        ta.value = fullUrl; document.body.appendChild(ta); ta.select();
                        try{ document.execCommand('copy'); }
                        catch(e){}
                        document.body.removeChild(ta);
                    }
                });
            })();

            (function(){
                const countdownEl = document.getElementById('countdownTime');
                if(!countdownEl) return;
                const expiresAt = new Date('<%= expires_at %>').getTime();
                function updateCountdown(){
                    const now = Date.now();
                    const diff = expiresAt - now;
                    if(diff <= 0){
                        countdownEl.textContent = 'Expired';
                        return;
                    }
                    const hours = Math.floor(diff / (1000*60*60));
                    const mins = Math.floor((diff % (1000*60*60)) / (1000*60));
                    const secs = Math.floor((diff % (1000*60)) / 1000);
                    countdownEl.textContent = hours > 0 ? `${hours}h ${mins}m ${secs}s` : mins > 0 ? `${mins}m ${secs}s` : `${secs}s`;
                }
                updateCountdown();
                setInterval(updateCountdown, 1000);
            })();
        </script>
    </div>
</body>
</html>
